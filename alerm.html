<!DOCTYPE html>
<html>

<head>
<script type="text/javascript">

let page=0;//ページ管理
let alermnum=0;//アラートの個数
let nowtime,nowhour,nowminute,sethour,setminute

let alermhour;//真のアラート用関数たち
let alermminute;
let alermsecond;


//はじめのページの変移
let settimeform="<h2>何時にしますか</h2><br>";
settimeform+="<input type='text' id='sethour'>時<input type='text' id='setminute'>分<br>"
settimeform+="<div id='taima-' onclick='settimefunc()'>タイマーをセット</div>";



//はじめのページ用

function helloworld(){
	
	if(page==0){
		document.getElementById("main").innerHTML=settimeform+"<audio id='alermmusic'src='alermMID_Splendid_reisiu_n.mp3' preload='auto'><p>（対応外ブラウザ向けの表示）</p></audio>";

		document.getElementById("menu").innerHTML="<div id='back' onclick='helloworld()'>トップに戻る</div>";
		document.getElementById("pic_ram").innerHTML="";
		page=1;
	}
};

function cliked(){
	//ここにランダム画像切り替えを実装する
	alert("おしましたね？");
}


/*こういう方法もあるけどあんまり正確じゃないよ
//アラームのための関数をセットする

function settimefunc1(){
	sethour=document.getElementById("sethour").value;
	setminute=document.getElementById("setminute").value;
	alert(sethour+"ジ"+setminute+"フン　にタイマーをセットしました");
	alerm1();
}


//アラームの時間になったか確認する

function alerm1(){
	nowtime= new Date();
	nowhour=nowtime.getHours();
	nowminute=nowtime.getMinutes();
	nowhour+="";
	nowminute+="";
alert(nowhour+""+sethour+""+nowminute+""+setminute);
	if(nowhour<=sethour && nowminute<=setminute){
		alert("時間になりました");
	}
	else{
		alert("tidaune");setTimeout(function(){alerm1()},60000);
	}

}
*/



function settimefunc()
{
	sethour=document.getElementById("sethour").value;
	setminute=document.getElementById("setminute").value;
	nowtime= new Date();
	nowhour=nowtime.getHours();
	nowminute=nowtime.getMinutes();
	nowsecond=nowtime.getSeconds();

	//関数を数字に直す
	Number(sethour);Number(setminute);
	//一日後でも大丈夫
	let balancehour=0;
	let balanceminute=0;
	let balancesecond=0;

	//以下没案
/*	if(sethour>nowhour){
		alermhour=sethour-nowhour*60*60*1000;
	}
	else{
		alermhour=24+sethour-nowhour*60*60*1000;
	}
	if(setminute>nowminute){
		alermminute=setminute-nowminute*60*1000;
	}
	else{
		alermminute=60+setminute-nowminute*60*1000;
	}
*/

	//さあ、難しい算数の時間だ
	if(sethour>=nowhour){balancehour=0;}
	else{balancehour=24;}

	if(setminute>=nowminute){balanceminute=0;}
	else{balanceminte=60;}

	alermsecond=60-nowsecond;

	//時間の差異が求められたのでミリ秒に直す
	alermhour=balancehour+sethour-nowhour;
	alermhour=alermhour*60*60*1000;
	alermminute=balanceminute+setminute-nowminute;
	alermminute=alermminute*60*1000;
	alermsecond=alermsecond*1000;



	setTimeout(function(){alerm();},alermhour+alermminute+alermsecond);
	alert("<div id='alerm"+alermnum+"' onclick='alermdelete("+alermnum+")'>");
	document.getElementById("allalerm").innerHTML+="<div id='alerm"+alermnum+"' onclick='alermdelete("+alermnum+")'>";
	document.getElementById("allalerm").innerHTML+=sethour+"じ"+setminute+"ふんにアラームをセットしました<br></div>";

	//アラームの個数を記録して、該当するものを消す（未実装）
	alermnum++;
}


function alerm(){

document.getElementById("alermmusic").play();

}


function alermdelete(alermdeletenum)
{
alert("デリートします");
//document.getElementById("alerm"+alermdeletenum).innerHTML="";
}



</script>


<title>ゆかりんアラーム</title>

</head>


<body>


<center>

<div id="main" onclick="helloworld()">
	<p>専属ゆかりん<br>読み上げあらーむ</p>
</div>

<div id="pic_ram">
<img src="https://pbs.twimg.com/media/CwbzvWiVIAA1SCb.jpg:large" 
width="40%"  height="40%" onclick="cliked()">
</div>




<div id="menu" onclick="helloworld()">
	画像以外の文字をクリックしてスタート
</div>

<div id="allalerm" onclick="alert()">
</div>

</center>


<script>
</script>


</body>

</html>


